<!DOCTYPE html >
<html>

  <head>
    <meta charset="utf-8" >
    <title>Registro de productos</title>
    <style type="text/css">
      ol, ul { 
      list-style-type: none;
      }
    </style>

    <script>
      // Validaciones con JavaScript

      function validarFormulario() {
        // Validación del nombre
        const nombre = document.getElementById('nombre').value;
        if (!nombre || nombre.length > 100) {
          alert('El nombre es requerido y debe tener 30 caracteres o menos.');
          return false;
        }

        // Validación de la marca
        const marca = document.getElementById('marca').value;
        if (!marca) {
          alert('La marca es requerida.');
          return false;
        }

        const modelo = document.getElementById('modelo').value;
        const modeloRegex = /^(?=.*[a-zA-Z])(?=.*[0-9])[a-zA-Z0-9]+$/; // Debe contener al menos una letra y un número
        if (!modelo || !modeloRegex.test(modelo) || modelo.length > 25) {
          alert('El modelo es requerido, debe ser alfanumérico, contener al menos una letra y un número, y tener 25 caracteres o menos.');
          return false;
        }

        // Validación del precio
        const precio = parseFloat(document.getElementById('precio').value);
        if (isNaN(precio) || precio <= 99.99) {
          alert('El precio es requerido y debe ser mayor a 99.99.');
          return false;
        }

        // Validación de los detalles (opcional, pero máximo 250 caracteres)
        const detalles = document.getElementById('detalles').value;
        if (detalles && detalles.length > 250) {
          alert('Los detalles deben tener 250 caracteres o menos.');
          return false;
        }

        // Validación de las unidades
        const unidades = parseInt(document.getElementById('unidades').value);
        if (isNaN(unidades) || unidades < 0) {
          alert('Las unidades son requeridas y deben ser un número mayor o igual a 0.');
          return false;
        }

        // Validación de la imagen
        const imagen = document.getElementById('form-imagen').value;
        if (!imagen) {
          document.getElementById('form-imagen').value = 'http://localhost/tecweb/practicas/p09/img/img.png';
        }

        //return true; // Si todas las validaciones pasan
      }
    </script>

  </head>

  <body>
    <h1>Registro de productos</h1>

    <form id="formularioProductos" action="http://localhost/tecweb/practicas/p09/set_producto_v2.php" method="post"  enctype="multipart/form-data" onsubmit="return validarFormulario()">

    <fieldset>
        <legend>Información del Producto</legend>
        <ul>
            <li><label for="nombre">Nombre:</label> <input type="text" name="nombre" id="nombre"></li>

            <li>
              <label for="marca">Marca:</label>
              <select name="marca" id="marca">
                <option value="">Seleccione una marca</option>
                <option value="Sweet">Sweet</option>
                <option value="La Tartería">La Tartería</option>
                <option value="Cookie Heaven">Cookie Heaven</option>
                <option value="Sweet Delights">Sweet Delights</option>
              </select>
            </li>

            <li><label for="modelo">Modelo:</label> <input type="text" name="modelo" id="modelo"></li>
            <li><label for="precio">Precio:</label> <input type="number" step="0.01" name="precio" id="precio"></li>
            <li><label for="detalles">Detalles:</label> <textarea name="detalles" id="detalles" rows="4" placeholder="Descripción del producto"></textarea></li>
            <li><label for="unidades">Unidades:</label><input type="number" name="unidades" id="unidades"></li>
            <li><label for="form-imagen">Ruta de la Imagen:</label> <input type="text" name="imagen" id="form-imagen" placeholder="http://localhost/tecweb/practicas/p09/img/img.png"></li>

        </ul>
    </fieldset>

      <p>
        <input type="submit" value="Registrar Producto">
        <input type="reset" value="Limpiar Formulario">
      </p>

    </form>
  </body>
</html>